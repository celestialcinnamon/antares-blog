<%
function renderLinkPaths(pathArray = []) {
  return pathArray
    .map(path => 
      path
        .replace(":root", config.root.substring(0, config.root.length - 1)) //to remove the excess slash at the end of root
        .replace(":css", "css")
        .replace(":slug", page.permalink)
    )
}
%>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title><%= page.title || config.title %></title>
  <%
    var description = config.description 
    if(is_post()) description = page.excerpt
  %>
  <meta
    name="description"
    content="<%- strip_html(description) %>"
  />
  <meta name="author" content="<%= config.author %>" />
  
  <!-- Favicon and PWA theme -->
  <link rel="apple-touch-icon" sizes="180x180" href="/antares-blog/images/apple-touch-icon.png?v=alQq8wbjvL">
  <link rel="icon" type="image/png" sizes="32x32" href="/antares-blog/images/favicon-32x32.png?v=alQq8wbjvL">
  <link rel="icon" type="image/png" sizes="16x16" href="/antares-blog/images/favicon-16x16.png?v=alQq8wbjvL">
  <link rel="manifest" href="/antares-blog/images/site.webmanifest?v=alQq8wbjvL">
  <link rel="mask-icon" href="/antares-blog/images/safari-pinned-tab.svg?v=alQq8wbjvL" color="#ff5555">
  <link rel="shortcut icon" href="/antares-blog/images/favicon.ico?v=alQq8wbjvL">
  <meta name="apple-mobile-web-app-title" content="Antares Programming">
  <meta name="application-name" content="Antares Programming">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/antares-blog/images/mstile-144x144.png?v=alQq8wbjvL">
  <meta name="msapplication-config" content="/antares-blog/images/browserconfig.xml?v=alQq8wbjvL">
  <meta name="theme-color" content="#ffffdd">

  <!-- Twitter Card data -->
  <meta name="twitter:card" value="<%- strip_html(description) %>">

  <%
    var postCoverPath = config.root + 'images/Website Cover v3.png';
    var url = page.path? config.root + page.path : config.root;

    if(is_post()) {
      if(page.is_featured) {
        postCoverPath = config.root + page.path + page.cover_image
      }
    }
  %>

  <!-- Open Graph data -->
  <meta property="og:title" content="<%= page.title || config.title %>" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://celestialcinnamon.github.io<%- url %>" />
  <meta property="og:image" content="http://celestialcinnmaon.github.io/<%- postCoverPath %>" />
  <meta property="og:description" content="<%- strip_html(description) %>" /> 

  <%- css('css/normalize.css') %>
  <%- css('css/index.css') %>

  <%
    const links = []
    if(is_post() && page.custom_css){
      const paths = renderLinkPaths(page.custom_css)
      links.push(...paths.map(path => `<link href="${path}" rel="stylesheet" />`))
    }

    console.log(links)
  %>

  <%- links.join("\n") %>

  <link
    href="https://fonts.googleapis.com/css?family=Montserrat:400,700,900"
    rel="stylesheet"
  />
  
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/css?family=Lora:400,400i&amp;subset=latin-ext" rel="stylesheet"> 
  <!--
    HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
  -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131462553-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-131462553-1');
  </script>

</head>

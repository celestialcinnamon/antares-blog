<%
function renderLinkPaths(pathArray = []) {
  return pathArray
    .map(path => 
      path
        .replace(":root", config.root.substring(0, config.root.length - 1)) //to remove the excess slash at the end of root
        .replace(":css", "css")
        .replace(":js", "js")
        .replace(":slug", page.permalink)
    )
}
%>
<head>
  <meta charset="utf-8" />
  <% if(page.is_autoreload) { %>
  <script>location.replace('/')</script>
  <% } %>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title><%= page.title || config.title %></title>
  <%
    var description = config.description 
    if(is_post()) description = page.excerpt
  %>
  <meta
    name="description"
    content="<%- strip_html(description) %>"
  />
  <meta name="author" content="<%= config.author %>" />
  
  <!-- Favicon and PWA theme -->
  <link rel="apple-touch-icon" sizes="180x180" href="/antares-blog/images/apple-touch-icon.png?v=yyL3E0AWom">
  <link rel="icon" type="image/png" sizes="32x32" href="/antares-blog/images/favicon-32x32.png?v=yyL3E0AWom">
  <link rel="icon" type="image/png" sizes="194x194" href="/antares-blog/images/favicon-194x194.png?v=yyL3E0AWom">
  <link rel="icon" type="image/png" sizes="192x192" href="/antares-blog/images/android-chrome-192x192.png?v=yyL3E0AWom">
  <link rel="icon" type="image/png" sizes="16x16" href="/antares-blog/images/favicon-16x16.png?v=yyL3E0AWom">
  <link rel="manifest" href="/antares-blog/images/site.webmanifest?v=yyL3E0AWom">
  <link rel="mask-icon" href="/antares-blog/images/safari-pinned-tab.svg?v=yyL3E0AWom" color="#efaa00">
  <link rel="shortcut icon" href="/antares-blog/images/favicon.ico?v=yyL3E0AWom">
  <meta name="apple-mobile-web-app-title" content="Antares">
  <meta name="application-name" content="Antares">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/antares-blog/images/mstile-144x144.png?v=yyL3E0AWom">
  <meta name="msapplication-config" content="/antares-blog/images/browserconfig.xml?v=yyL3E0AWom">
  <meta name="theme-color" content="#bbbbbb">



  <!-- Twitter Card data -->
  <meta name="twitter:card" content="<%- strip_html(description) %>">

  <%
    var postCoverPath = config.root + 'images/favicon-194x194.png';
    var url = page.path? config.root + page.path : config.root;

    if(is_post()) {
      if(page.is_featured) {
        postCoverPath = config.root + page.path + page.cover_image
      }
    }
  %>

  <!-- Open Graph data -->
  <meta property="og:title" content="<%= page.title || config.title %>" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://celestialcinnamon.github.io<%- url %>" />
  <meta property="og:image" content="http://celestialcinnamon.github.io/<%- postCoverPath %>" />
  <meta property="og:description" content="<%- strip_html(description) %>" /> 

  <link rel="stylesheet" href="https://rsms.me/inter/inter.css" media="screen">
  <link href="/antares-blog/css/baseline.css" rel="stylesheet" media="screen">
  <link href="/antares-blog/css/mobile.css" rel="stylesheet" media="screen">
  <link href="/antares-blog/css/desktop.css" rel="stylesheet" media="screen and (min-width: 750px)">
  <!-- <link href="/antares-blog/css/print.css" rel="stylesheet" media="print"> -->

  <%
    const links = []
    if(is_post() && page.custom_css){
      const paths = renderLinkPaths(page.custom_css)
      links.push(...paths.map(path => `<link href="${path}" rel="stylesheet" />`))
    }

    const scripts = []
    if(is_post() && page.custom_scripts) {
      const paths = renderLinkPaths(page.custom_scripts)
      scripts.push(...paths.map(path => `<script src="${path}"></script>`))
    }
  %>

  <%- links.join("\n") %>
  <%- scripts.join("\n") %>

  <!-- TODO: Uncomment these links -->
  <link media="screen" href="https://fonts.googleapis.com/css?family=Vidaloka&display=swap" rel="stylesheet"> 
  <link media="screen" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700&display=swap" rel="stylesheet"> 
  <link media="screen" href="https://fonts.googleapis.com/css?family=B612+Mono&display=swap" rel="stylesheet">

  <!--
    HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
  -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
